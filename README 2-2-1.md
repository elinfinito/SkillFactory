На прошлом занятии мы все значения переменных вносили вручную. В реальных задачах данные мы получаем из внешних источников. Представим, что вам надо прочитать некий файл data.txt, , в котором собрана аналитика по некой рекламной кампании.

В этом модуле мы научимся читать содержимое файлов и записывать их, например, в список. В течение занятия мы будем работать с файлом data.txt (и его аналогом в Excel data.xlsx).

Начнем с малого! Для удобства в различных задачах мы разбили исходный файл на небольшие производные файлы с ограниченным объемом данных. 

Для начала рассмотрим файл, в котором содержатся только один столбец файла data.txt с ID пользователей (столбец user_id).

Файл user_ids.txt

Шаг 1.

Для работы с этим файлом скачайте его себе.

Так выглядит столбец с ID  пользователей: 

1010
1036
1041
1041
1042

Шаг 2. Прочитаем файл

Для чтения файлов используется следующая конструкция:

with open('user_ids.txt', 'r') as f:
    for line in f:
В ней указываем имя файла (user_ids.txt), параметр чтения ('r') и обозначаем файл как f.

У параметра 'r' есть и другие варианты: 'w' — очистить файл для записи в него новых данных, 'a' — открыть файл для добавления новых записей в конец. Эти опции мы рассмотрим на следующих занятиях.

Далее в в цикле "for line in f" проходим по каждой строке файла, записывая ее содержимое в переменную line. Выведем содержимое файла на экран:

with open('user_ids.txt', 'r') as f:
    for line in f:
        print(line)
Упражнение
1/1 point (ungraded)
Какое значение будет выведено последним на экран?



Шаг 2. Чтение содержимого файла в лист

ЧТЕНИЕ СОДЕРЖИМОГО ФАЙЛА В ЛИСТ
Значения user_id почему-то выводятся на экран с лишними «пробелами» между строк. Это происходит из-за того, что в текстовых файлах в конце строки всегда стоит служебный символ переноса строки (обозначается как \n и скрывается от пользователя в текстовых редакторах). Чтобы этого избежать, можно воспользоваться методом strip(). Он убирает с начала и конца строки переносы строк.

Продолжаем работать с файлом user_ids.txt

with open('user_ids.txt', 'r') as f:
    for line in f:
        print(line.strip())
Чтобы проводить операции с набором ID пользователей, давайте записывать каждый очередной ID в лист user_ids:

user_ids = []
with open( 'user_ids.txt', 'r' ) as f:
    for line in f:
        user_id = line.strip()        
        user_ids.append(user_id)

Упражнение
1 point possible (ungraded)
Выведите на экран первые 5 элементов листа user_ids. Какой ID будет в этом наборе последним?
